<?php
define("PHP_AUTH_USER","pi");
define("PHP_AUTH_PW","raspberry");
// test.php
function checkAuth($username, $password) {
    // Check if received values match PHP_AUTH_USER and PHP_AUTH_PW
    if ($username == PHP_AUTH_USER && $password == PHP_AUTH_PW) {
        // Success
        return 'AUTHORISED';
    } else {
        return "UNAUTHORISED";
    }
}

// Initialize variables
$_SESSION['auth'] = "";
$username = "";
$password = "";

// Check if form is submitted
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Capture form data
    $username = isset($_POST['username']) ? $_POST['username'] : '';
    $password = isset($_POST['password']) ? $_POST['password'] : '';

    echo "Before checkAuth():\n";
    echo "Username: $username\n";
    echo "Password: $password\n";

    // Assign the returned value to $_SESSION['auth']
    $_SESSION['auth'] = checkAuth($username, $password);
    
    // Display "After" section
    echo "\nAfter checkAuth():\n";
    echo "Auth: $_SESSION['auth']\n";
    echo "Username: $username\n";
    echo "Password: $password\n";
}

?>

<form method="POST">
    Username: <input type="text" name="username" value="<?php echo $username; ?>"><br>
    Password: <input type="password" name="password" value="<?php echo $password; ?>"><br>
    <input type="submit" value="Submit">
</form>


